<!DOCTYPE html>
<html>
<head>
  <title>Rails refactoring fun - looking at old code</title>
  <meta content='Bizzark is a Scottsdale Arizona based website design and development company.' name='description'>
  <meta content='website development, arizona website development, arizona web developer, arizona web development company' name='keywords'>
  <link href='http://www.bizzark.com/blog.xml' rel='alternate' title='Bizzark Blog Feed' type='application/rss+xml'>
  <link href='/favicon.png' rel='icon' type='image/png'>

  <link rel="stylesheet" href="/css/main.css">

  <script>
   var styleNode = document.createElement('style');
   styleNode.type = "text/css";
   css = "body{ background: #d5d5d5 url(\"/images/bg" + (Math.floor((Math.random()*4)+1)) +".png\") no-repeat top left; background-attachment:fixed;}";
   

   // browser detection (based on prototype.js)
   if(!!(window.attachEvent && !window.opera)) {
      styleNode.styleSheet.cssText = css;
   } else {
      var styleText = document.createTextNode(css);
      styleNode.appendChild(styleText);
   }
   document.getElementsByTagName('head')[0].appendChild(styleNode);
  </script>

  <script src='//use.typekit.net/ztt1pbp.js' type='text/javascript'></script>
  <script>
    //<![CDATA[
      try{Typekit.load();}catch(e){}
    //]]>
  </script>
</head>

<body class=''>
  <div id='bg'></div>
  <div id='bgoverlay'></div>
  <div id='container'>
        <div id='header'>
      <div id='words'>
        <h1>RUBY HTML WWW</h1>
        <h2>ZEROS AND ONES FROM BRENT WEJROWSKI</h2>
      </div>
      <div id='logo'><h1><a href="/">BIZZARK</a></h1></div>
      <div id='nav'>
        <h1 class='nav '><a href="/">BLOG</a></h1>
        <h1 class='nav '><a href="/about.html">ABOUT</a></h1>
      </div>
    </div><!--/#header-->

    <div id='content'>
      <h1 class="header-banner">Rails refactoring fun - looking at old code</h1>
<div class="top-back">
  <a href="/">&larr; Back to Blogs</a>
</div>
<div class="post-date">
  17 February 2012
</div>
<p>
    Every so often I get to do some updates on code I wrote years ago. It&#39;s often a hideous experience (especially when you&#39;re in a rush and did not write the code), but it can be entertaining and enjoyable. Taking a big sloppy mess of redundancies and complications and making it readable, clean, and orderly&mdash;it&#39;s a satisfying experience refactoring old unrefined code&mdash;a nice guage of your growth as a human being in the small but large area of your life as a programmer.</p>

<p>
    I&#39;ll share just a few quick examples. The first two are from a Rails project I had originally built when I was getting my hands dirty with Ruby (and was still a bit handicapped by having programmed so long in PHP).</p>

<p>
    &nbsp;</p>

<p>
    <strong>Example 1: ActiveRecord scopes</strong></p>

<blockquote>
    <p>
        speakers = Page.find_all_by_page_type_id(PageType.find_by_name(&quot;speaker&quot;).id, :conditions=&gt;{:status =&gt; &#39;online&#39;}, :order=&gt;&quot;position&quot;)</p>
    <p>
        <strong>To...</strong></p>
    <p>
        &nbsp;speakers = Page.speakers</p>
</blockquote>

<p>
    &nbsp;</p>

<p>
    <strong>Example 2: Unnecessary for loops</strong></p>

<blockquote>
    <p>
        &lt;%&nbsp;if page.categories.count &gt; 0<br />
        &nbsp; &nbsp; c_count = 0<br />
        &nbsp; &nbsp; page.categories.each do |c|<br />
        &nbsp; &nbsp; &nbsp; &nbsp; c_count+=1<br />
        &nbsp; &nbsp; &nbsp; &nbsp; if c_count &gt;1&nbsp;<br />
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; %&gt;/ &nbsp;&lt;%<br />
        &nbsp; &nbsp; &nbsp; &nbsp; end %&gt;<br />
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;%=c.name %&gt;<br />
        &nbsp; &nbsp; &nbsp;&lt;%&nbsp;end&nbsp;%&gt;<br />
        &lt;%&nbsp;end&nbsp;%&gt;</p>
    <p>
        <strong>To...</strong></p>
    &nbsp;&lt;%= page.categories.map(&amp;:name).join(&quot;/&quot;) ?&gt;</blockquote>

<p>
    <strong>Example 3: Ambiguous variable names</strong> -- This was code written by a previous developer. From what I could tell &quot;in&quot; and &quot;out&quot; had nothing to do with what the numbers actually were, nor anything to do with the words &quot;in&quot; and &quot;out&quot;... it caused me a lot of confusion.</p>

<blockquote>
    <p>
        EXACT_TARGET_LISTS = {<br />
        &nbsp; &nbsp; :in &nbsp; &nbsp; &nbsp; =&gt; &#39;867530933&#39;,<br />
        &nbsp; &nbsp; :out &nbsp; &nbsp; &nbsp;=&gt; &#39;9021055&#39;<br />
        }</p>
    <p>
        <b>To...</b></p>
    EXACT_TARGET_LISTS = {<br />
    &nbsp; &nbsp; :newsletter_welcome &nbsp; =&gt; &#39;867530933&#39;,<br />
    &nbsp; &nbsp; :member_welcome &nbsp; &nbsp; &nbsp;=&gt; &#39;90210555&#39;<br />
    }</blockquote>


  <div class="post-footer">
    <div class="comments-num"><a href="/<%= @page.slug %>#disqus_thread">Comments (View)</a></div>
  </div>

  <div id="disqus_thread"></div>
  <script type="text/javascript">
    function getDisqusEmbed(){
       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
       dsq.src = 'http://bizzark-web-development.disqus.com/embed.js';
       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    } (function() {
      setTimeout("getDisqusEmbed()", 50);  
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=bizzark-web-development">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

    </div><!--/#content-->
  </div><!--/container-->

<script>
  //<![CDATA[
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  //]]>
</script>
<script>
  //<![CDATA[
    try{ var pageTracker = _gat._getTracker("UA-5643858-1"); pageTracker._trackPageview(); } catch(err) {}
  //]]>
</script>

</body>
</html>
